'use strict';

import test from 'ava';
const config = require('config');

const GolessCaptchaSolver = require('../solver.js');

test('Simple', async t => {
	const solver = new GolessCaptchaSolver({
		token: config.get('GOLESS_CAPTCHA_TOKEN', ''),
		limit: 10, // 10 seconds to pass test
	});

	const guess = await solver.solve({
		image: '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',
	})

	t.is(guess, 'KRLJLB');
});